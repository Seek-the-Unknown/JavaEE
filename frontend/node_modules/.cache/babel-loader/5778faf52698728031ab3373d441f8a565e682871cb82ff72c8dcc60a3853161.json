{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { ref, onMounted, watch } from \"vue\";\nimport { useRouter } from \"vue-router\";\nimport { useUserStore } from \"@/store/user\";\nimport { getVenueList, deleteVenue } from \"@/api/venue\";\nexport default {\n  __name: 'VenueListView',\n  setup(__props, {\n    expose: __expose\n  }) {\n    __expose();\n    const {\n      isAdmin\n    } = useUserStore();\n    const router = useRouter();\n    const venues = ref([]);\n    const loading = ref(true);\n    const searchQuery = ref(\"\");\n    const handleAddNew = () => router.push(\"/admin/venue/new\");\n    const handleEdit = id => router.push(`/admin/venue/edit/${id}`);\n    const handleDelete = async id => {\n      if (confirm(`您确定要删除此场馆吗？`)) {\n        try {\n          await deleteVenue(id);\n          fetchVenues(searchQuery.value);\n        } catch (error) {\n          alert(\"删除失败: \" + error.message);\n        }\n      }\n    };\n    const fetchVenues = async query => {\n      try {\n        loading.value = true;\n        venues.value = await getVenueList(query);\n      } catch (error) {\n        console.error(error);\n      } finally {\n        loading.value = false;\n      }\n    };\n    let debounceTimer = null;\n    watch(searchQuery, newQuery => {\n      clearTimeout(debounceTimer);\n      debounceTimer = setTimeout(() => {\n        fetchVenues(newQuery);\n      }, 300);\n    });\n    onMounted(() => {\n      fetchVenues(\"\");\n    });\n    const __returned__ = {\n      isAdmin,\n      router,\n      venues,\n      loading,\n      searchQuery,\n      handleAddNew,\n      handleEdit,\n      handleDelete,\n      fetchVenues,\n      get debounceTimer() {\n        return debounceTimer;\n      },\n      set debounceTimer(v) {\n        debounceTimer = v;\n      },\n      ref,\n      onMounted,\n      watch,\n      get useRouter() {\n        return useRouter;\n      },\n      get useUserStore() {\n        return useUserStore;\n      },\n      get getVenueList() {\n        return getVenueList;\n      },\n      get deleteVenue() {\n        return deleteVenue;\n      }\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["ref","onMounted","watch","useRouter","useUserStore","getVenueList","deleteVenue","isAdmin","router","venues","loading","searchQuery","handleAddNew","push","handleEdit","id","handleDelete","confirm","fetchVenues","value","error","alert","message","query","console","debounceTimer","newQuery","clearTimeout","setTimeout"],"sources":["F:/Java_web_code/frontend/src/views/VenueListView.vue"],"sourcesContent":["<template>\n  <div class=\"venue-list-page\">\n    <header class=\"page-header\">\n      <h1 class=\"page-title\">所有场馆</h1>\n      <div class=\"header-controls\">\n        <div class=\"search-bar\">\n          <i class=\"icon icon-search\"></i>\n          <input\n            type=\"text\"\n            placeholder=\"按名称搜索...\"\n            v-model=\"searchQuery\"\n          />\n        </div>\n        <button v-if=\"isAdmin\" @click=\"handleAddNew\" class=\"add-new-btn\">\n          <i class=\"icon icon-plus\"></i>\n          <span>新增场馆</span>\n        </button>\n      </div>\n    </header>\n\n    <div v-if=\"loading\" class=\"loading-state\">加载中...</div>\n    <div v-else-if=\"venues.length === 0\" class=\"empty-state\">\n      未找到匹配的场馆。\n    </div>\n    <div v-else class=\"venue-grid\">\n      <router-link\n        v-for=\"venue in venues\"\n        :key=\"venue.id\"\n        :to=\"`/venue/${venue.id}`\"\n        class=\"venue-card-link\"\n      >\n        <div class=\"venue-card\">\n          <div\n            class=\"card-image\"\n            :style=\"{\n              backgroundImage: `url(${\n                venue.imageUrl ||\n                `https://picsum.photos/seed/${venue.id}/400/250`\n              })`,\n            }\"\n          >\n            <span class=\"type-tag\">{{ venue.type }}</span>\n          </div>\n          <div class=\"card-body\">\n            <h3 class=\"venue-name\">{{ venue.name }}</h3>\n            <p class=\"venue-description\">\n              {{ venue.description || \"暂无描述\" }}\n            </p>\n            <div v-if=\"isAdmin\" class=\"admin-actions\">\n              <button @click.prevent=\"handleEdit(venue.id)\">编辑</button>\n              <button @click.prevent=\"handleDelete(venue.id)\">删除</button>\n            </div>\n          </div>\n          <div class=\"card-footer\">\n            <span class=\"price\">¥{{ venue.pricePerHour }}/小时</span>\n          </div>\n        </div>\n      </router-link>\n    </div>\n  </div>\n</template>\n\n<script setup>\nimport { ref, onMounted, watch } from \"vue\";\nimport { useRouter } from \"vue-router\";\nimport { useUserStore } from \"@/store/user\";\nimport { getVenueList, deleteVenue } from \"@/api/venue\";\n\nconst { isAdmin } = useUserStore();\nconst router = useRouter();\nconst venues = ref([]);\nconst loading = ref(true);\nconst searchQuery = ref(\"\");\n\nconst handleAddNew = () => router.push(\"/admin/venue/new\");\nconst handleEdit = (id) => router.push(`/admin/venue/edit/${id}`);\nconst handleDelete = async (id) => {\n  if (confirm(`您确定要删除此场馆吗？`)) {\n    try {\n      await deleteVenue(id);\n      fetchVenues(searchQuery.value);\n    } catch (error) {\n      alert(\"删除失败: \" + error.message);\n    }\n  }\n};\n\nconst fetchVenues = async (query) => {\n  try {\n    loading.value = true;\n    venues.value = await getVenueList(query);\n  } catch (error) {\n    console.error(error);\n  } finally {\n    loading.value = false;\n  }\n};\nlet debounceTimer = null;\nwatch(searchQuery, (newQuery) => {\n  clearTimeout(debounceTimer);\n  debounceTimer = setTimeout(() => {\n    fetchVenues(newQuery);\n  }, 300);\n});\nonMounted(() => {\n  fetchVenues(\"\");\n});\n</script>\n\n<style scoped>\n.page-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 32px;\n}\n.header-controls {\n  display: flex;\n  align-items: center;\n  gap: 16px;\n}\n.search-bar {\n  position: relative;\n}\n.search-bar .icon {\n  position: absolute;\n  left: 16px;\n  top: 50%;\n  transform: translateY(-50%);\n  color: var(--color-text-secondary);\n}\n.search-bar input {\n  padding: 10px 16px 10px 44px;\n  border: 1px solid var(--color-border);\n  border-radius: var(--border-radius);\n  width: 280px;\n  font-size: 14px;\n}\n.add-new-btn {\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  background: var(--gradient-primary);\n  color: white;\n  border: none;\n  padding: 10px 16px;\n  border-radius: var(--border-radius);\n  cursor: pointer;\n  font-weight: 500;\n}\n\n.venue-grid {\n  display: grid;\n  grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));\n  gap: 24px;\n}\n.venue-card-link {\n  text-decoration: none;\n  color: inherit;\n}\n.venue-card {\n  background: #fff;\n  border-radius: 12px;\n  box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.05);\n  border: 1px solid var(--color-border);\n  overflow: hidden;\n  display: flex;\n  flex-direction: column;\n  height: 100%;\n  transition: transform 0.2s ease, box-shadow 0.2s ease;\n}\n.venue-card:hover {\n  transform: translateY(-5px);\n  box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.07);\n}\n.card-image {\n  height: 180px;\n  background-size: cover;\n  background-position: center;\n  position: relative;\n}\n.type-tag {\n  position: absolute;\n  top: 12px;\n  left: 12px;\n  background: rgba(0, 0, 0, 0.4);\n  color: white;\n  padding: 4px 10px;\n  border-radius: 6px;\n  font-size: 12px;\n}\n.card-body {\n  padding: 20px;\n  flex-grow: 1;\n  display: flex;\n  flex-direction: column;\n}\n.venue-name {\n  margin: 0 0 8px;\n  font-size: 18px;\n  font-weight: 600;\n}\n.venue-description {\n  margin: 0 0 16px;\n  font-size: 14px;\n  color: var(--color-text-secondary);\n  flex-grow: 1;\n}\n.admin-actions {\n  display: flex;\n  gap: 8px;\n  margin-bottom: 16px;\n}\n.admin-actions button {\n  background: none;\n  border: 1px solid var(--color-border);\n  padding: 4px 8px;\n  font-size: 12px;\n  border-radius: 4px;\n  cursor: pointer;\n}\n.card-footer {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding-top: 16px;\n  margin-top: auto;\n  border-top: 1px solid var(--color-border);\n}\n.price {\n  font-weight: 600;\n  font-size: 16px;\n  color: var(--color-primary-text);\n}\n</style>\n"],"mappings":";AA+DA,SAASA,GAAG,EAAEC,SAAS,EAAEC,KAAK,QAAQ,KAAK;AAC3C,SAASC,SAAS,QAAQ,YAAY;AACtC,SAASC,YAAY,QAAQ,cAAc;AAC3C,SAASC,YAAY,EAAEC,WAAW,QAAQ,aAAa;;;;;;;IAEvD,MAAM;MAAEC;IAAQ,CAAC,GAAGH,YAAY,CAAC,CAAC;IAClC,MAAMI,MAAM,GAAGL,SAAS,CAAC,CAAC;IAC1B,MAAMM,MAAM,GAAGT,GAAG,CAAC,EAAE,CAAC;IACtB,MAAMU,OAAO,GAAGV,GAAG,CAAC,IAAI,CAAC;IACzB,MAAMW,WAAW,GAAGX,GAAG,CAAC,EAAE,CAAC;IAE3B,MAAMY,YAAY,GAAGA,CAAA,KAAMJ,MAAM,CAACK,IAAI,CAAC,kBAAkB,CAAC;IAC1D,MAAMC,UAAU,GAAIC,EAAE,IAAKP,MAAM,CAACK,IAAI,CAAC,qBAAqBE,EAAE,EAAE,CAAC;IACjE,MAAMC,YAAY,GAAG,MAAOD,EAAE,IAAK;MACjC,IAAIE,OAAO,CAAC,aAAa,CAAC,EAAE;QAC1B,IAAI;UACF,MAAMX,WAAW,CAACS,EAAE,CAAC;UACrBG,WAAW,CAACP,WAAW,CAACQ,KAAK,CAAC;QAChC,CAAC,CAAC,OAAOC,KAAK,EAAE;UACdC,KAAK,CAAC,QAAQ,GAAGD,KAAK,CAACE,OAAO,CAAC;QACjC;MACF;IACF,CAAC;IAED,MAAMJ,WAAW,GAAG,MAAOK,KAAK,IAAK;MACnC,IAAI;QACFb,OAAO,CAACS,KAAK,GAAG,IAAI;QACpBV,MAAM,CAACU,KAAK,GAAG,MAAMd,YAAY,CAACkB,KAAK,CAAC;MAC1C,CAAC,CAAC,OAAOH,KAAK,EAAE;QACdI,OAAO,CAACJ,KAAK,CAACA,KAAK,CAAC;MACtB,CAAC,SAAS;QACRV,OAAO,CAACS,KAAK,GAAG,KAAK;MACvB;IACF,CAAC;IACD,IAAIM,aAAa,GAAG,IAAI;IACxBvB,KAAK,CAACS,WAAW,EAAGe,QAAQ,IAAK;MAC/BC,YAAY,CAACF,aAAa,CAAC;MAC3BA,aAAa,GAAGG,UAAU,CAAC,MAAM;QAC/BV,WAAW,CAACQ,QAAQ,CAAC;MACvB,CAAC,EAAE,GAAG,CAAC;IACT,CAAC,CAAC;IACFzB,SAAS,CAAC,MAAM;MACdiB,WAAW,CAAC,EAAE,CAAC;IACjB,CAAC,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}