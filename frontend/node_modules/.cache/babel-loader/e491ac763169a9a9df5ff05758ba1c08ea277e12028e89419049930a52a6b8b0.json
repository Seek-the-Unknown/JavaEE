{"ast":null,"code":"import { createElementVNode as _createElementVNode, vModelText as _vModelText, withDirectives as _withDirectives, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, renderList as _renderList, Fragment as _Fragment, toDisplayString as _toDisplayString, normalizeStyle as _normalizeStyle, withModifiers as _withModifiers, resolveComponent as _resolveComponent, withCtx as _withCtx, createBlock as _createBlock } from \"vue\";\nconst _hoisted_1 = {\n  class: \"venue-list-page\"\n};\nconst _hoisted_2 = {\n  class: \"page-header\"\n};\nconst _hoisted_3 = {\n  class: \"header-controls\"\n};\nconst _hoisted_4 = {\n  class: \"search-bar\"\n};\nconst _hoisted_5 = {\n  key: 0,\n  class: \"loading-state\"\n};\nconst _hoisted_6 = {\n  key: 1,\n  class: \"empty-state\"\n};\nconst _hoisted_7 = {\n  key: 2,\n  class: \"venue-grid\"\n};\nconst _hoisted_8 = {\n  class: \"venue-card\"\n};\nconst _hoisted_9 = {\n  class: \"type-tag\"\n};\nconst _hoisted_10 = {\n  class: \"card-body\"\n};\nconst _hoisted_11 = {\n  class: \"venue-name\"\n};\nconst _hoisted_12 = {\n  class: \"venue-description\"\n};\nconst _hoisted_13 = {\n  key: 0,\n  class: \"admin-actions\"\n};\nconst _hoisted_14 = [\"onClick\"];\nconst _hoisted_15 = [\"onClick\"];\nconst _hoisted_16 = {\n  class: \"card-footer\"\n};\nconst _hoisted_17 = {\n  class: \"price\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_router_link = _resolveComponent(\"router-link\");\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createElementVNode(\"header\", _hoisted_2, [_cache[3] || (_cache[3] = _createElementVNode(\"h1\", {\n    class: \"page-title\"\n  }, \"所有场馆\", -1 /* CACHED */)), _createElementVNode(\"div\", _hoisted_3, [_createElementVNode(\"div\", _hoisted_4, [_cache[1] || (_cache[1] = _createElementVNode(\"i\", {\n    class: \"icon icon-search\"\n  }, null, -1 /* CACHED */)), _withDirectives(_createElementVNode(\"input\", {\n    type: \"text\",\n    placeholder: \"按名称搜索...\",\n    \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $setup.searchQuery = $event)\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $setup.searchQuery]])]), $setup.isAdmin ? (_openBlock(), _createElementBlock(\"button\", {\n    key: 0,\n    onClick: $setup.handleAddNew,\n    class: \"add-new-btn\"\n  }, [...(_cache[2] || (_cache[2] = [_createElementVNode(\"i\", {\n    class: \"icon icon-plus\"\n  }, null, -1 /* CACHED */), _createElementVNode(\"span\", null, \"新增场馆\", -1 /* CACHED */)]))])) : _createCommentVNode(\"v-if\", true)])]), $setup.loading ? (_openBlock(), _createElementBlock(\"div\", _hoisted_5, \"加载中...\")) : $setup.venues.length === 0 ? (_openBlock(), _createElementBlock(\"div\", _hoisted_6, \" 未找到匹配的场馆。 \")) : (_openBlock(), _createElementBlock(\"div\", _hoisted_7, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($setup.venues, venue => {\n    return _openBlock(), _createBlock(_component_router_link, {\n      key: venue.id,\n      to: `/venue/${venue.id}`,\n      class: \"venue-card-link\"\n    }, {\n      default: _withCtx(() => [_createElementVNode(\"div\", _hoisted_8, [_createElementVNode(\"div\", {\n        class: \"card-image\",\n        style: _normalizeStyle({\n          backgroundImage: `url(${venue.imageUrl || `https://picsum.photos/seed/${venue.id}/400/250`})`\n        })\n      }, [_createElementVNode(\"span\", _hoisted_9, _toDisplayString(venue.type), 1 /* TEXT */)], 4 /* STYLE */), _createElementVNode(\"div\", _hoisted_10, [_createElementVNode(\"h3\", _hoisted_11, _toDisplayString(venue.name), 1 /* TEXT */), _createElementVNode(\"p\", _hoisted_12, _toDisplayString(venue.description || \"暂无描述\"), 1 /* TEXT */), $setup.isAdmin ? (_openBlock(), _createElementBlock(\"div\", _hoisted_13, [_createElementVNode(\"button\", {\n        onClick: _withModifiers($event => $setup.handleEdit(venue.id), [\"prevent\"])\n      }, \"编辑\", 8 /* PROPS */, _hoisted_14), _createElementVNode(\"button\", {\n        onClick: _withModifiers($event => $setup.handleDelete(venue.id), [\"prevent\"])\n      }, \"删除\", 8 /* PROPS */, _hoisted_15)])) : _createCommentVNode(\"v-if\", true)]), _createElementVNode(\"div\", _hoisted_16, [_createElementVNode(\"span\", _hoisted_17, \"¥\" + _toDisplayString(venue.pricePerHour) + \"/小时\", 1 /* TEXT */)])])]),\n      _: 2 /* DYNAMIC */\n    }, 1032 /* PROPS, DYNAMIC_SLOTS */, [\"to\"]);\n  }), 128 /* KEYED_FRAGMENT */))]))]);\n}","map":{"version":3,"names":["class","_createElementBlock","_hoisted_1","_createElementVNode","_hoisted_2","_hoisted_3","_hoisted_4","type","placeholder","$setup","searchQuery","$event","isAdmin","onClick","handleAddNew","loading","_hoisted_5","venues","length","_hoisted_6","_hoisted_7","_Fragment","_renderList","venue","_createBlock","_component_router_link","key","id","to","_hoisted_8","style","_normalizeStyle","imageUrl","_hoisted_9","_toDisplayString","_hoisted_10","_hoisted_11","name","_hoisted_12","description","_hoisted_13","_withModifiers","handleEdit","_hoisted_14","handleDelete","_hoisted_15","_hoisted_16","_hoisted_17","pricePerHour"],"sources":["F:\\Java_web_code\\frontend\\src\\views\\VenueListView.vue"],"sourcesContent":["<template>\n  <div class=\"venue-list-page\">\n    <header class=\"page-header\">\n      <h1 class=\"page-title\">所有场馆</h1>\n      <div class=\"header-controls\">\n        <div class=\"search-bar\">\n          <i class=\"icon icon-search\"></i>\n          <input\n            type=\"text\"\n            placeholder=\"按名称搜索...\"\n            v-model=\"searchQuery\"\n          />\n        </div>\n        <button v-if=\"isAdmin\" @click=\"handleAddNew\" class=\"add-new-btn\">\n          <i class=\"icon icon-plus\"></i>\n          <span>新增场馆</span>\n        </button>\n      </div>\n    </header>\n\n    <div v-if=\"loading\" class=\"loading-state\">加载中...</div>\n    <div v-else-if=\"venues.length === 0\" class=\"empty-state\">\n      未找到匹配的场馆。\n    </div>\n    <div v-else class=\"venue-grid\">\n      <router-link\n        v-for=\"venue in venues\"\n        :key=\"venue.id\"\n        :to=\"`/venue/${venue.id}`\"\n        class=\"venue-card-link\"\n      >\n        <div class=\"venue-card\">\n          <div\n            class=\"card-image\"\n            :style=\"{\n              backgroundImage: `url(${\n                venue.imageUrl ||\n                `https://picsum.photos/seed/${venue.id}/400/250`\n              })`,\n            }\"\n          >\n            <span class=\"type-tag\">{{ venue.type }}</span>\n          </div>\n          <div class=\"card-body\">\n            <h3 class=\"venue-name\">{{ venue.name }}</h3>\n            <p class=\"venue-description\">\n              {{ venue.description || \"暂无描述\" }}\n            </p>\n            <div v-if=\"isAdmin\" class=\"admin-actions\">\n              <button @click.prevent=\"handleEdit(venue.id)\">编辑</button>\n              <button @click.prevent=\"handleDelete(venue.id)\">删除</button>\n            </div>\n          </div>\n          <div class=\"card-footer\">\n            <span class=\"price\">¥{{ venue.pricePerHour }}/小时</span>\n          </div>\n        </div>\n      </router-link>\n    </div>\n  </div>\n</template>\n\n<script setup>\nimport { ref, onMounted, watch } from \"vue\";\nimport { useRouter } from \"vue-router\";\nimport { useUserStore } from \"@/store/user\";\nimport { getVenueList, deleteVenue } from \"@/api/venue\";\n\nconst { isAdmin } = useUserStore();\nconst router = useRouter();\nconst venues = ref([]);\nconst loading = ref(true);\nconst searchQuery = ref(\"\");\n\nconst handleAddNew = () => router.push(\"/admin/venue/new\");\nconst handleEdit = (id) => router.push(`/admin/venue/edit/${id}`);\nconst handleDelete = async (id) => {\n  if (confirm(`您确定要删除此场馆吗？`)) {\n    try {\n      await deleteVenue(id);\n      fetchVenues(searchQuery.value);\n    } catch (error) {\n      alert(\"删除失败: \" + error.message);\n    }\n  }\n};\n\nconst fetchVenues = async (query) => {\n  try {\n    loading.value = true;\n    venues.value = await getVenueList(query);\n  } catch (error) {\n    console.error(error);\n  } finally {\n    loading.value = false;\n  }\n};\nlet debounceTimer = null;\nwatch(searchQuery, (newQuery) => {\n  clearTimeout(debounceTimer);\n  debounceTimer = setTimeout(() => {\n    fetchVenues(newQuery);\n  }, 300);\n});\nonMounted(() => {\n  fetchVenues(\"\");\n});\n</script>\n\n<style scoped>\n.page-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 32px;\n}\n.header-controls {\n  display: flex;\n  align-items: center;\n  gap: 16px;\n}\n.search-bar {\n  position: relative;\n}\n.search-bar .icon {\n  position: absolute;\n  left: 16px;\n  top: 50%;\n  transform: translateY(-50%);\n  color: var(--color-text-secondary);\n}\n.search-bar input {\n  padding: 10px 16px 10px 44px;\n  border: 1px solid var(--color-border);\n  border-radius: var(--border-radius);\n  width: 280px;\n  font-size: 14px;\n}\n.add-new-btn {\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  background: var(--gradient-primary);\n  color: white;\n  border: none;\n  padding: 10px 16px;\n  border-radius: var(--border-radius);\n  cursor: pointer;\n  font-weight: 500;\n}\n\n.venue-grid {\n  display: grid;\n  grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));\n  gap: 24px;\n}\n.venue-card-link {\n  text-decoration: none;\n  color: inherit;\n}\n.venue-card {\n  background: #fff;\n  border-radius: 12px;\n  box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.05);\n  border: 1px solid var(--color-border);\n  overflow: hidden;\n  display: flex;\n  flex-direction: column;\n  height: 100%;\n  transition: transform 0.2s ease, box-shadow 0.2s ease;\n}\n.venue-card:hover {\n  transform: translateY(-5px);\n  box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.07);\n}\n.card-image {\n  height: 180px;\n  background-size: cover;\n  background-position: center;\n  position: relative;\n}\n.type-tag {\n  position: absolute;\n  top: 12px;\n  left: 12px;\n  background: rgba(0, 0, 0, 0.4);\n  color: white;\n  padding: 4px 10px;\n  border-radius: 6px;\n  font-size: 12px;\n}\n.card-body {\n  padding: 20px;\n  flex-grow: 1;\n  display: flex;\n  flex-direction: column;\n}\n.venue-name {\n  margin: 0 0 8px;\n  font-size: 18px;\n  font-weight: 600;\n}\n.venue-description {\n  margin: 0 0 16px;\n  font-size: 14px;\n  color: var(--color-text-secondary);\n  flex-grow: 1;\n}\n.admin-actions {\n  display: flex;\n  gap: 8px;\n  margin-bottom: 16px;\n}\n.admin-actions button {\n  background: none;\n  border: 1px solid var(--color-border);\n  padding: 4px 8px;\n  font-size: 12px;\n  border-radius: 4px;\n  cursor: pointer;\n}\n.card-footer {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding-top: 16px;\n  margin-top: auto;\n  border-top: 1px solid var(--color-border);\n}\n.price {\n  font-weight: 600;\n  font-size: 16px;\n  color: var(--color-primary-text);\n}\n</style>\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}