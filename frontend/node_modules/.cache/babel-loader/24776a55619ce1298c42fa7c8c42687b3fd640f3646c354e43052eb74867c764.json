{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { reactive, computed } from \"vue\";\nimport { useRouter } from \"vue-router\";\n\n// 使用Vue 3的reactive API创建一个响应式的状态对象\nconst userState = reactive({\n  userInfo: JSON.parse(localStorage.getItem(\"userInfo\")) || null\n});\nexport function useUserStore() {\n  const router = useRouter();\n\n  // 计算属性，判断用户是否登录\n  const isLoggedIn = computed(() => !!userState.userInfo);\n  const isAdmin = computed(() => !!userState.userInfo && userState.userInfo.isAdmin === 1);\n  // 登录方法\n  const login = userData => {\n    userState.userInfo = userData;\n    localStorage.setItem(\"userInfo\", JSON.stringify(userData));\n  };\n\n  // 退出登录方法\n  const logout = () => {\n    userState.userInfo = null;\n    localStorage.removeItem(\"userInfo\");\n    // 退回到登录页\n    if (router) {\n      router.push(\"/login\");\n    }\n  };\n  return {\n    userState,\n    isLoggedIn,\n    isAdmin,\n    login,\n    logout\n  };\n}","map":{"version":3,"names":["reactive","computed","useRouter","userState","userInfo","JSON","parse","localStorage","getItem","useUserStore","router","isLoggedIn","isAdmin","login","userData","setItem","stringify","logout","removeItem","push"],"sources":["F:/Java_web_code/frontend/src/store/user.js"],"sourcesContent":["import { reactive, computed } from \"vue\";\nimport { useRouter } from \"vue-router\";\n\n// 使用Vue 3的reactive API创建一个响应式的状态对象\nconst userState = reactive({\n  userInfo: JSON.parse(localStorage.getItem(\"userInfo\")) || null,\n});\n\nexport function useUserStore() {\n  const router = useRouter();\n\n  // 计算属性，判断用户是否登录\n  const isLoggedIn = computed(() => !!userState.userInfo);\n\n  const isAdmin = computed(\n    () => !!userState.userInfo && userState.userInfo.isAdmin === 1\n  );\n  // 登录方法\n  const login = (userData) => {\n    userState.userInfo = userData;\n    localStorage.setItem(\"userInfo\", JSON.stringify(userData));\n  };\n\n  // 退出登录方法\n  const logout = () => {\n    userState.userInfo = null;\n    localStorage.removeItem(\"userInfo\");\n    // 退回到登录页\n    if (router) {\n      router.push(\"/login\");\n    }\n  };\n\n  return {\n    userState,\n    isLoggedIn,\n    isAdmin,\n    login,\n    logout,\n  };\n}\n"],"mappings":";AAAA,SAASA,QAAQ,EAAEC,QAAQ,QAAQ,KAAK;AACxC,SAASC,SAAS,QAAQ,YAAY;;AAEtC;AACA,MAAMC,SAAS,GAAGH,QAAQ,CAAC;EACzBI,QAAQ,EAAEC,IAAI,CAACC,KAAK,CAACC,YAAY,CAACC,OAAO,CAAC,UAAU,CAAC,CAAC,IAAI;AAC5D,CAAC,CAAC;AAEF,OAAO,SAASC,YAAYA,CAAA,EAAG;EAC7B,MAAMC,MAAM,GAAGR,SAAS,CAAC,CAAC;;EAE1B;EACA,MAAMS,UAAU,GAAGV,QAAQ,CAAC,MAAM,CAAC,CAACE,SAAS,CAACC,QAAQ,CAAC;EAEvD,MAAMQ,OAAO,GAAGX,QAAQ,CACtB,MAAM,CAAC,CAACE,SAAS,CAACC,QAAQ,IAAID,SAAS,CAACC,QAAQ,CAACQ,OAAO,KAAK,CAC/D,CAAC;EACD;EACA,MAAMC,KAAK,GAAIC,QAAQ,IAAK;IAC1BX,SAAS,CAACC,QAAQ,GAAGU,QAAQ;IAC7BP,YAAY,CAACQ,OAAO,CAAC,UAAU,EAAEV,IAAI,CAACW,SAAS,CAACF,QAAQ,CAAC,CAAC;EAC5D,CAAC;;EAED;EACA,MAAMG,MAAM,GAAGA,CAAA,KAAM;IACnBd,SAAS,CAACC,QAAQ,GAAG,IAAI;IACzBG,YAAY,CAACW,UAAU,CAAC,UAAU,CAAC;IACnC;IACA,IAAIR,MAAM,EAAE;MACVA,MAAM,CAACS,IAAI,CAAC,QAAQ,CAAC;IACvB;EACF,CAAC;EAED,OAAO;IACLhB,SAAS;IACTQ,UAAU;IACVC,OAAO;IACPC,KAAK;IACLI;EACF,CAAC;AACH","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}